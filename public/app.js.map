{"version":3,"sources":["src/components/App.jsx","src/components/Banner.jsx","src/components/Card.jsx","src/components/Loader.jsx","src/initialize.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AACA;;;;AAEA;;;;AACA;;;;AACA;;;;;;;;;;;;IAEqB,G;;;AACnB,eAAY,KAAZ,EAAmB;AAAA;;AAAA,uFACX,KADW;;AAEjB,UAAK,KAAL,GAAa;AACX,aAAO,EADI;AAEX,eAAS,CACP,0FADO,EAEP,gFAFO;AAFE,KAAb;AAFiB;AASlB;;;;mCAEc,O,EAAS;AACtB,WAAK,QAAL,CAAc,EAAC,SAAS,OAAV,EAAd,EAAkC,KAAK,eAAvC;AACD;;;wCAEmB;AAClB,WAAK,eAAL;AACD;;;sCAEiB;AAChB,UAAI,QAAQ,KAAK,KAAL,CAAW,KAAvB;;AAEA,UAAI,CAAC,KAAD,IAAU,MAAM,MAAN,KAAiB,CAA/B,EAAkC;AAChC;AACD;;AAED,UAAI,aAAa,EAAjB;AACA,UAAI,OAAO,MAAM,GAAN,CAAU,UAAS,IAAT,EAAe;AAClC,mBAAW,KAAK,GAAhB,IAAuB,IAAvB;AACA,eAAO,KAAK,GAAZ;AACD,OAHU,CAAX;;AAKA,UAAI,OAAO,IAAX;;AAEA,sBAAM,IAAN,CAAW,UAAX,EAAuB,EAAC,MAAM,IAAP,EAAvB,EAAqC,IAArC,CAA0C,UAAS,GAAT,EAAc,QAAd,EAAwB;AAChE,iBAAS,IAAT,CAAc,OAAd,CAAsB,UAAS,IAAT,EAAe;AACnC,cAAI,WAAW,KAAK,GAAhB,CAAJ,EAA0B;AACxB,uBAAW,KAAK,GAAhB,EAAqB,OAArB,GAA+B,KAAK,OAApC;AACD;AACF,SAJD;;AAMA,aAAK,QAAL,CAAc,EAAC,OAAO,KAAK,KAAL,CAAW,KAAnB,EAAd;AACD,OARD;AASD;;;sCAEiB;AAChB,WAAK,QAAL,CAAc,EAAC,WAAW,IAAZ,EAAd;;AAEA,UAAI,UAAU,KAAK,KAAL,CAAW,OAAzB;;AAEA,UAAI,CAAC,OAAD,IAAY,QAAQ,MAAR,KAAmB,CAAnC,EAAsC;AACpC,aAAK,KAAL,CAAW,KAAX,GAAmB,EAAnB;AACA;AACD;;AAED,UAAI,OAAO,IAAX;;AAEA,sBAAM,IAAN,CAAW,YAAX,EAAyB,EAAC,MAAM,OAAP,EAAzB,EAA0C,IAA1C,CAA+C,UAAS,GAAT,EAAc,QAAd,EAAwB;AACrE,aAAK,QAAL,CAAc;AACZ,qBAAW,KADC;AAEZ,iBAAO,SAAS,IAAT,CACJ,MADI,CACG,UAAS,CAAT,EAAY,CAAZ,EAAe;AAAC,mBAAO,EAAE,MAAF,CAAS,EAAE,OAAX,CAAP;AAA4B,WAD/C,EACiD,EADjD,EAEJ,GAFI,CAEA,UAAS,IAAT,EAAe;AAClB,iBAAK,UAAL,CAAgB,IAAhB,GAAuB,IAAI,IAAJ,CAAS,KAAK,UAAL,CAAgB,SAAzB,CAAvB;AACA,mBAAO,IAAP;AACD,WALI,EAMJ,IANI,CAMC,UAAS,CAAT,EAAY,CAAZ,EAAe;AAAE,mBAAO,EAAE,UAAF,CAAa,IAAb,CAAkB,OAAlB,KAA8B,EAAE,UAAF,CAAa,IAAb,CAAkB,OAAlB,EAArC;AAAmE,WANrF;AAFK,SAAd,EASG,KAAK,eAAL,CAAqB,IAArB,CAA0B,IAA1B,CATH;AAUD,OAXD;AAYD;;;6BAEQ;AACP,aACE;AAAA;QAAA,EAAK,WAAU,SAAf;QACE,kDAAQ,SAAS,KAAK,KAAL,CAAW,OAA5B,EAAqC,UAAU,KAAK,cAAL,CAAoB,IAApB,CAAyB,IAAzB,CAA/C,GADF;QAEE;AAAA;UAAA,EAAK,WAAU,OAAf;UACE;AAAA;YAAA,EAAK,WAAU,OAAf;YACI,KAAK,KAAL,CAAW,KAAX,CAAiB,GAAjB,CAAqB,UAAS,IAAT,EAAe,CAAf,EAAkB;AACrC,qBAAO,gDAAM,MAAM,IAAZ,EAAkB,KAAK,KAAK,EAAL,GAAU,KAAK,OAAtC,GAAP;AACH,aAFC;AADJ;AADF,SAFF;QASE,uCAAK,WAAU,QAAf,GATF;QAUE,kDAAQ,WAAW,KAAK,KAAL,CAAW,SAA9B;AAVF,OADF;AAcD;;;;EAvF8B,gBAAM,S;;kBAAlB,G;;;;;;;;;;;;ACPrB;;;;;;;;;;;;IACqB,M;;;AACnB,kBAAY,KAAZ,EAAmB;AAAA;;AAAA,0FACX,KADW;;AAGjB,UAAK,KAAL,GAAa;AACX,cAAQ,KADG;AAEX,mBAAa;AAFF,KAAb;AAHiB;AAOlB;;;;6BAEQ;AACP,WAAK,QAAL,CAAc,EAAC,QAAQ,CAAC,KAAK,KAAL,CAAW,MAArB,EAAd;AACD;;;wCAEmB,K,EAAO;AACzB,WAAK,QAAL,CAAc,EAAC,aAAa,MAAM,MAAN,CAAa,KAAb,CAAmB,KAAnB,CAAyB,IAAzB,CAAd,EAAd;AACD;;;6BAEQ;AACP,WAAK,KAAL,CAAW,QAAX,CAAoB,KAAK,KAAL,CAAW,WAA/B;AACA,WAAK,QAAL,CAAc,EAAC,QAAQ,KAAT,EAAd;AACD;;;+BAEU;AACT,WAAK,QAAL,CAAc,EAAC,QAAQ,KAAT,EAAd;AACD;;;wCAEmB;AAClB,UAAI,UAAU,KAAK,KAAL,CAAW,OAAzB;;AAEA,UAAI,CAAC,OAAD,IAAY,QAAQ,MAAR,KAAmB,CAAnC,EAAsC;AACpC,aAAK,QAAL,CAAc,EAAC,aAAa,EAAd,EAAd;AACA;AACD;;AAED,WAAK,QAAL,CAAc,EAAC,aAAa,OAAd,EAAd;AACD;;;6BAEQ;AACP,UAAI,gBAAgB,CAAC,QAAD,CAApB;;AAEA,UAAI,KAAK,KAAL,CAAW,MAAf,EAAuB;AACrB,sBAAc,IAAd,CAAmB,MAAnB;AACD,OAFD,MAEO;AACL,sBAAc,IAAd,CAAmB,QAAnB;AACD;;AAED,aACE;AAAA;QAAA,EAAK,WAAU,QAAf;QACE;AAAA;UAAA,EAAK,WAAU,YAAf;UACE,uCAAK,WAAU,QAAf,GADF;UAEE;AAAA;YAAA,EAAK,WAAU,qBAAf;YAAA;AAAA,WAFF;UAGE;AAAA;YAAA,EAAK,WAAU,cAAf;YACE,qCAAG,WAAW,KAAK,KAAL,CAAW,MAAX,GAAoB,cAApB,GAAqC,YAAnD,EAAiE,SAAS,KAAK,MAAL,CAAY,IAAZ,CAAiB,IAAjB,CAA1E;AADF;AAHF,SADF;QAQE;AAAA;UAAA,EAAK,WAAW,cAAc,IAAd,CAAmB,GAAnB,CAAhB;UACE;AACE,mBAAO,KAAK,KAAL,CAAW,WAAX,CAAuB,IAAvB,CAA4B,IAA5B,CADT;AAEE,sBAAU,KAAK,mBAAL,CAAyB,IAAzB,CAA8B,IAA9B;AAFZ,YADF;UAKE;AAAA;YAAA,EAAK,WAAU,aAAf;YACE;AAAA;cAAA,EAAK,WAAU,eAAf;cACE;AAAA;gBAAA,EAAQ,WAAU,iBAAlB,EAAoC,SAAS,KAAK,QAAL,CAAc,IAAd,CAAmB,IAAnB,CAA7C;gBAAA;AAAA,eADF;cAEE;AAAA;gBAAA,EAAQ,WAAU,eAAlB,EAAkC,SAAS,KAAK,MAAL,CAAY,IAAZ,CAAiB,IAAjB,CAA3C;gBAAA;AAAA;AAFF;AADF;AALF;AARF,OADF;AAuBD;;;;EAtEiC,gBAAM,S;;kBAArB,M;;;;;;;;;;;;ACDrB;;;;;;;;;;;;IACqB,I;;;AACnB,gBAAY,KAAZ,EAAmB;AAAA;;AAAA,mFACX,KADW;AAElB;;;;6BAEQ;AACP,UAAI,OAAO,KAAK,KAAL,CAAW,IAAtB;;AAEA,UAAI,mBAAmB,CAAC,WAAD,CAAvB;AACA,UAAI,CAAC,KAAK,SAAV,EAAqB;AACnB,yBAAiB,IAAjB,CAAsB,OAAtB;AACD;;AAED,UAAI,aAAa,KAAK,UAAtB;;AAEA,aACE;AAAA;QAAA,EAAK,WAAU,MAAf;QACE;AAAA;UAAA,EAAK,WAAU,KAAf;UACE;AAAA;YAAA,EAAK,WAAU,cAAf;YACE;AAAA;cAAA,EAAK,WAAW,iBAAiB,IAAjB,CAAsB,GAAtB,CAAhB;cACE;AAAA;gBAAA,EAAG,QAAO,QAAV,EAAmB,WAAU,MAA7B,EAAoC,MAAM,KAAK,GAA/C;gBACE;AAAA;kBAAA,EAAK,WAAU,OAAf;kBACE;AAAA;oBAAA,EAAK,WAAU,OAAf;oBACE,uCAAK,KAAK,KAAK,SAAf;AADF;AADF;AADF,eADF;cAQE;AAAA;gBAAA,EAAM,WAAU,YAAhB;gBAA8B,KAAK;AAAnC;AARF;AADF,WADF;UAaE;AAAA;YAAA,EAAK,WAAU,cAAf;YACE;AAAA;cAAA,EAAK,WAAU,KAAf;cACE;AAAA;gBAAA,EAAK,WAAU,QAAf;gBACE;AAAA;kBAAA,EAAK,WAAU,UAAf;kBAA2B,KAAK,OAAL,IAAgB,KAAK;AAAhD;AADF,eADF;cAIE;AAAA;gBAAA,EAAK,WAAU,cAAf;gBACE;AAAA;kBAAA,EAAK,WAAU,aAAf;kBACE;AAAA;oBAAA,EAAK,WAAU,UAAf;oBAA2B,WAAW;AAAtC,mBADF;kBAEE;AAAA;oBAAA,EAAK,WAAU,UAAf;oBAA2B,WAAW;AAAtC;AAFF;AADF;AAJF,aADF;YAaE;AAAA;cAAA,EAAK,WAAU,OAAf;cAAwB,KAAK;AAA7B,aAbF;YAcE;AAAA;cAAA,EAAK,WAAU,uBAAf;cACE;AAAA;gBAAA,EAAK,WAAU,QAAf;gBACE;AAAA;kBAAA,EAAK,WAAU,OAAf;kBAAuB;AAAA;oBAAA;oBAAO,KAAK;AAAZ;AAAvB;AADF,eADF;cAIE;AAAA;gBAAA,EAAK,WAAU,cAAf;gBACE;AAAA;kBAAA,EAAG,QAAO,QAAV,EAAmB,WAAU,MAA7B,EAAoC,MAAM,KAAK,GAA/C;kBAAoD,qCAAG,WAAU,qBAAb;AAApD;AADF;AAJF;AAdF;AAbF;AADF,OADF;AAyCD;;;;EAxD+B,gBAAM,S;;kBAAnB,I;;;;;;;;;;;;ACDrB;;;;;;;;;;;;IACqB,M;;;AACnB,kBAAY,KAAZ,EAAmB;AAAA;;AAAA,qFACX,KADW;AAElB;;;;6BAEQ;AACP,UAAI,aAAa,CAAC,QAAD,CAAjB;;AAEA,UAAI,KAAK,KAAL,CAAW,SAAf,EAA0B;AACxB,mBAAW,IAAX,CAAgB,SAAhB;AACD;;AAED,aACE;AAAA;QAAA,EAAK,WAAW,WAAW,IAAX,CAAgB,GAAhB,CAAhB;QACE;AAAA;UAAA,EAAK,WAAU,aAAf;UAAA;AAAA;AADF,OADF;AAKD;;;;EAjBiC,gBAAM,S;;kBAArB,M;;;;;;ACDrB;;;;AACA;;;;AACA;;;;;;AAEA,SAAS,gBAAT,CAA0B,kBAA1B,EAA8C,YAAM;AAClD,qBAAS,MAAT,CAAgB,kDAAhB,EAAyB,SAAS,aAAT,CAAuB,MAAvB,CAAzB;AACD,CAFD","file":"public/app.js","sourcesContent":["import React from 'react';\nimport qwest from 'qwest';\n\nimport Banner from './Banner.jsx';\nimport Card from './Card.jsx';\nimport Loader from './Loader.jsx';\n\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      items: [],\n      queries: [\n        'https://www.leboncoin.fr/locations/offres/bretagne/finistere/?th=1&mrs=600&mre=950&ret=1',\n        'https://www.leboncoin.fr/motos/offres/bretagne/finistere/29/?th=1&pe=7&ccs=600'\n      ]\n    };\n  }\n\n  queriesChanged(queries) {\n    this.setState({queries: queries}, this.loadSummaryData);\n  }\n\n  componentDidMount() {\n    this.loadSummaryData();\n  }\n\n  loadDetailsData() {\n    var items = this.state.items;\n\n    if (!items || items.length === 0) {\n      return;\n    }\n\n    var itemsByUrl = {};\n    var urls = items.map(function(item) {\n      itemsByUrl[item.url] = item;\n      return item.url;\n    });\n\n    var that = this;\n\n    qwest.post('/details', {urls: urls}).then(function(xhr, response) {\n      response.data.forEach(function(item) {\n        if (itemsByUrl[item.url]) {\n          itemsByUrl[item.url].address = item.address;\n        }\n      });\n\n      that.setState({items: that.state.items});\n    });\n  }\n\n  loadSummaryData() {\n    this.setState({isLoading: true});\n\n    var queries = this.state.queries;\n\n    if (!queries || queries.length === 0) {\n      this.state.items = [];\n      return;\n    }\n\n    var that = this;\n\n    qwest.post('/summaries', {urls: queries}).then(function(xhr, response) {\n      that.setState({\n        isLoading: false,\n        items: response.data\n          .reduce(function(a, b) {return a.concat(b.results);}, [])\n          .map(function(item) {\n            item.lastUpdate.date = new Date(item.lastUpdate.ISOString);\n            return item;\n          })\n          .sort(function(a, b) { return b.lastUpdate.date.getTime() - a.lastUpdate.date.getTime(); })\n      }, that.loadDetailsData.bind(that));\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"content\">\n        <Banner queries={this.state.queries} onChange={this.queriesChanged.bind(this)}></Banner>\n        <div className=\"items\">\n          <div className=\"prout\">\n            { this.state.items.map(function(item, i) {\n                return <Card item={item} key={item.id + item.address}></Card>\n            }) }\n          </div>\n        </div>\n        <div className=\"footer\"></div>\n        <Loader isLoading={this.state.isLoading}/>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nexport default class Banner extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isOpen: false,\n      tempQueries: []\n    };\n  }\n\n  toggle() {\n    this.setState({isOpen: !this.state.isOpen});\n  }\n\n  handleQueriesChange(event) {\n    this.setState({tempQueries: event.target.value.split('\\n')});\n  }\n\n  onSave() {\n    this.props.onChange(this.state.tempQueries);\n    this.setState({isOpen: false});\n  }\n\n  onCancel() {\n    this.setState({isOpen: false});\n  }\n\n  componentDidMount() {\n    var queries = this.props.queries;\n\n    if (!queries || queries.length === 0) {\n      this.setState({tempQueries: []});\n      return;\n    }\n\n    this.setState({tempQueries: queries});\n  }\n\n  render() {\n    var drawerClasses = ['drawer'];\n\n    if (this.state.isOpen) {\n      drawerClasses.push('open');\n    } else {\n      drawerClasses.push('closed');\n    }\n\n    return (\n      <div className=\"banner\">\n        <div className=\"row header\">\n          <div className=\"col-20\"></div>\n          <div className=\"col-60 center light\">The Good Corner</div>\n          <div className=\"col-20 right\">\n            <i className={this.state.isOpen ? 'fa fa-remove' : 'fa fa-gear'} onClick={this.toggle.bind(this)}></i>\n          </div>\n        </div>\n        <div className={drawerClasses.join(' ')}>\n          <textarea\n            value={this.state.tempQueries.join('\\n')}\n            onChange={this.handleQueriesChange.bind(this)}\n          ></textarea>\n          <div className=\"row buttons\">\n            <div className=\"col-100 right\">\n              <button className=\"secondary light\" onClick={this.onCancel.bind(this)}>Cancel</button>\n              <button className=\"primary light\" onClick={this.onSave.bind(this)}>Save</button>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nexport default class Card extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    var item = this.props.item;\n\n    var thumbnailClasses = ['thumbnail'];\n    if (!item.thumbnail) {\n      thumbnailClasses.push('empty');\n    }\n\n    var lastUpdate = item.lastUpdate;\n\n    return (\n      <div className=\"card\">\n        <div className=\"row\">\n          <div className=\"col-20 right\">\n            <div className={thumbnailClasses.join(' ')}>\n              <a target=\"_blank\" className=\"link\" href={item.url}>\n                <div className=\"outer\">\n                  <div className=\"inner\">\n                    <img src={item.thumbnail}></img>\n                  </div>\n                </div>\n              </a>\n              <span className=\"imageCount\">{item.imageCount}</span>\n            </div>\n          </div>\n          <div className=\"col-80 infos\">\n            <div className=\"row\">\n              <div className=\"col-50\">\n                <div className=\"location\">{item.address || item.location}</div>\n              </div>\n              <div className=\"col-50 right\">\n                <div className=\"last-update\">\n                  <div className=\"absolute\">{lastUpdate.label}</div>\n                  <div className=\"relative\">{lastUpdate.relativeLabel}</div>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"title\">{item.title}</div>\n            <div className=\"row price-and-actions\">\n              <div className=\"col-50\">\n                <div className=\"price\"><span>{item.price}</span></div>\n              </div>\n              <div className=\"col-50 right\">\n                <a target=\"_blank\" className=\"link\" href={item.url}><i className=\"fa fa-external-link\"></i></a>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nexport default class Loader extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    var classNames = ['loader'];\n\n    if (this.props.isLoading) {\n      classNames.push('visible');\n    }\n\n    return (\n      <div className={classNames.join(' ')}>\n        <div className=\"label light\">Chargement...</div>\n      </div>\n    );\n  }\n}\n","import ReactDOM from 'react-dom';\nimport React from 'react';\nimport App from './components/App.jsx';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  ReactDOM.render(<App />, document.querySelector('#app'));\n});\n"]}